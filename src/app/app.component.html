<header>
  <div class="line">&nbsp;</div>
  <div class="flex-container">
    <img src="assets/icon.png" />
    <h1>Simple PDF Viewer</h1>
  </div>
</header>

<main>
  <section id="tools">

    <!-- Main Menu -->
    <div id="mainMenu">
      <div *ngIf="!backButtonVisible">
        <div class="mainMenuItem" [class.active]="isActiveMenu(1)" (click)="setActiveMenu(1)">Document</div>
        <div *ngIf="pdfViewer.isDocumentLoaded()">
          <div class="mainMenuItem" [class.active]="isActiveMenu(7)" (click)="setActiveMenu(7)">Information</div>
          <div class="mainMenuItem" [class.active]="isActiveMenu(2)" (click)="setActiveMenu(2)">Table of Content</div>
          <div class="mainMenuItem" [class.active]="isActiveMenu(3)" (click)="setActiveMenu(3)">Navigation</div>
          <div class="mainMenuItem" [class.active]="isActiveMenu(4)" (click)="setActiveMenu(4)">Zooming</div>
          <div class="mainMenuItem" [class.active]="isActiveMenu(5)" (click)="setActiveMenu(5)">Rotation</div>
          <div class="mainMenuItem" [class.active]="isActiveMenu(6)" (click)="setActiveMenu(6)">Searching</div>
        </div>
      </div>
      <div *ngIf="backButtonVisible">
        <div class="mainMenuItem" [class.active]="isActiveMenu(1)" (click)="setActiveMenu(1)"><span class="fa fa-angle-double-left"></span>Back</div>
      </div>
    </div>

    <!-- Sub Menus -->
    <div id="subMenus">
      <!-- Document -->
      <div class="subMenu" *ngIf="isActiveMenu(1)">
          <div class="subMenuItem" (click)="urlField.click()">Open Document...</div>
          <input style="display: none;" #urlField type="file" (change)="openDocument(urlField.files, firstPageBox, firstZoomBox)" accept="application/pdf">
          <div class="subMenuItemGroup">
            <input  type="number" pattern="-?[0-9]*(\.[0-9]+)?" [(ngModel)]="firstPageBox" placeholder="First page">
            <div class="clear"></div>
          </div>
          <div class="subMenuItemGroup">
            <input type="input" [(ngModel)]="firstZoomBox" placeholder="Zoom value">
            <div class="clear"></div>
          </div>
          <p>Zoom value can be one of the followings: [integer], 'page', 'width', 'height'</p>
      </div>
      <!-- Table of Content -->
      <div class="subMenu" *ngIf="isActiveMenu(2)">
        <div class="outline" *ngIf="pdfViewer.hasOutline()">
          <h2>Table of Content</h2>
          <ul *ngFor="let item of pdfViewer.getOutline()" class="outline-list">
            <li>
              <a (click)="pdfViewer.navigateToDestination(item.dest)" class="outline-main-item">{{ item.title }}</a>
              <ul class="outline-sub-item" *ngFor="let child of item.items">
                <li><a (click)="pdfViewer.navigateToDestination(child.dest)">{{ child.title }}</a></li>
              </ul>
            </li>
          </ul>
        </div>
        <p *ngIf="!pdfViewer.hasOutline()">
          Outline is not defined.
        </p>
      </div>
      <!-- Navigation -->
      <div class="subMenu" *ngIf="isActiveMenu(3)">
        <div class="subMenuItemGroup">
          <div class="subMenuItem" (click)="pdfViewer.firstPage()">First Page</div>
          <div class="subMenuItem" (click)="pdfViewer.lastPage()">Last Page</div>
          <div class="clear"></div>
        </div>
          <div class="subMenuItemGroup">
          <div class="subMenuItem" (click)="pdfViewer.prevPage()">Previous Page</div>
          <div class="subMenuItem" (click)="pdfViewer.nextPage()">Next Page</div>
          <div class="clear"></div>
        </div>
        <div class="subMenuItemGroup">
          <input class="small" type="number" pattern="-?[0-9]*(\.[0-9]+)?" [(ngModel)]="pageBox" size="5" (keyup.enter)="pdfViewer.navigateToPage(pageBox)" placeholder="Page..">
          <div class="subMenuItem fa fa-search" (click)="pdfViewer.navigateToPage(pageBox)"></div>
          <div class="clear"></div>
        </div>
        <p>
          Number of Pages: {{pdfViewer.getNumberOfPages()}} <br/> 
          Actual page: {{pdfViewer.getCurrentPage()}}
        </p>
      </div>
      <!-- Zooming -->
      <div class="subMenu" *ngIf="isActiveMenu(4)">
        <div class="subMenuItemGroup">
          <div class="subMenuItem" (click)="pdfViewer.zoomIn()">In</div>
          <div class="subMenuItem" (click)="pdfViewer.setZoom(0.5)">50%</div>
          <div class="subMenuItem" (click)="pdfViewer.zoomReset()">100%</div>
          <div class="subMenuItem" (click)="pdfViewer.zoomOut()">Out</div>
          <div class="clear"></div>
        </div>
        <div class="subMenuItemGroup">
          <div class="subMenuItem" (click)="pdfViewer.zoomPageWidth()">Width</div>
          <div class="subMenuItem" (click)="pdfViewer.zoomFullPage()">Full</div>
          <div class="subMenuItem" (click)="pdfViewer.zoomPageHeight()">Height</div>
          <div class="clear"></div>
        </div>
          <div class="subMenuItemGroup">
            <input class="small" type="number" pattern="-?[0-9]*(\.[0-9]+)?" [(ngModel)]="zoomBox" size="5" (keyup.enter)="pdfViewer.setZoomInPercent(zoomBox)" placeholder="Zoom...">
            <div class="subMenuItem fa fa-search" (click)="pdfViewer.setZoomInPercent(zoomBox)"></div>
            <div class="clear"></div>
          </div>
          <p>
            Actual zoom value: {{getZoomPercent()}} % <br/>
            Constraint: 5% <= Zoom <= 500%
          </p>
      </div>
      <!-- Rotation -->
      <div class="subMenu" *ngIf="isActiveMenu(5)">
        <div class="subMenuItemGroup">
          <div class="subMenuItem" (click)="pdfViewer.turnLeft()"><span class="fa fa-rotate-left"></span></div>
          <div class="subMenuItem" (click)="pdfViewer.resetRotation()">Reset</div>
          <div class="subMenuItem" (click)="pdfViewer.turnRight()"><span class="fa fa-rotate-right"></span></div>
          <div class="clear"></div>
        </div>
        <p>Actual rotation: {{pdfViewer.getRotation()}} &deg;</p>
      </div>
      <!-- Searching -->
      <div class="subMenu" *ngIf="isActiveMenu(6)">
        <div class="subMenuItemGroup">
          <input type="input" [(ngModel)]="searchBox" (keyup.enter)="searchText(searchBox)" placeholder="Type..." value="{{lastSearch}}">
          <div class="subMenuItem fa fa-search" (click)="searchText(searchBox)"></div>
          <div class="clear"></div>
        </div>
        <div class="subMenuItemGroup" *ngIf="pdfViewer.hasMatches()">
          <div class="subMenuItem" (click)="pdfViewer.previousMatch()">Previous</div>
          <div class="subMenuItem" (click)="pdfViewer.nextMatch()">Next</div>
          <div class="clear"></div>
        </div>
        <p *ngIf="!pdfViewer.isSearching()">Number of matches: {{pdfViewer.getNumberOfMatches()}}</p>
        <p *ngIf="pdfViewer.isSearching()">Searching...</p>
      </div>
      <!-- Information -->
      <div class="subMenu" *ngIf="isActiveMenu(7)">
          <div class="outline">
            <ul class="outline-list" *ngFor="let info of pdfViewer.getDocumentInformation()">
              <li class="outline-main-item">{{info.key}}:</li>
              <li class="outline-sub-item">{{info.value}}</li>
            </ul>
          </div>
      </div>
    </div>

  </section>

  <!-- Simple PDF Viewer Container -->
  <section id="viewer">
    <simple-pdf-viewer #pdfViewer [src]="src" (onProgress)="onProgress($event)" (onError)="onError($event)"></simple-pdf-viewer>
    <div *ngIf="!pdfViewer.isDocumentLoaded()" class="infoBox">
      <div class="fa fa-circle-o-notch fa-spin" *ngIf="!errorMsg"></div>
      <div class="errorMsg" *ngIf="errorMsg">{{errorMsg}}</div>
    </div>
  </section>
</main>

<footer>
  <p *ngIf="pdfViewer.isDocumentLoaded()">{{pdfViewer.getCurrentPage() + ' / ' + pdfViewer.getNumberOfPages()}} ({{getZoomPercent()}}%)</p>
</footer>
